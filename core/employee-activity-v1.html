<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Employee Activity Tracker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Color classes for activity types */
        .activity-bar-productive { background-color: #22C55E; } /* green-500 */
        .activity-bar-nonproductive { background-color: #EF4444; } /* red-500 */
        .activity-bar-neutral { background-color: #FBBF24; } /* amber-400 */
        .activity-bar-away { background-color: #E5E7EB; } /* gray-200 */
        .activity-bar-idle { background-color: #FFFFFF; } /* white */
        
        .tab-button.active {
            border-bottom-color: #3B82F6; /* blue-500 */
            color: #3B82F6;
            font-weight: 600;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <div class="container mx-auto p-4 md:p-8">
        <!-- Header -->
        <header class="mb-8 flex flex-col md:flex-row justify-between items-start md:items-center">
            <div>
                <h1 class="text-3xl font-bold text-gray-900">Employee Activity Dashboard</h1>
                <p class="text-gray-600">Tracking activity for <span class="font-semibold">John Doe</span> on <span class="font-semibold" id="currentDate"></span></p>
            </div>
            <div class="flex items-center space-x-4 mt-4 md:mt-0">
                 <input type="date" id="date-picker" class="bg-white border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5">
                <button class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition duration-300">Export Report</button>
            </div>
        </header>

        <!-- Tabs -->
        <div class="mb-8">
            <div class="border-b border-gray-200">
                <nav class="-mb-px flex space-x-8" aria-label="Tabs">
                    <button onclick="changeTab('dashboard')" class="tab-button active whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm">Dashboard</button>
                    <button onclick="changeTab('details')" class="tab-button whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm text-gray-500 hover:text-gray-700 hover:border-gray-300">Details</button>
                    <button onclick="changeTab('screenshots')" class="tab-button whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm text-gray-500 hover:text-gray-700 hover:border-gray-300">Screenshots</button>
                    <button onclick="changeTab('keystrokes')" class="tab-button whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm text-gray-500 hover:text-gray-700 hover:border-gray-300">Keystrokes Log</button>
                </nav>
            </div>
        </div>

        <main>
            <!-- Dashboard Tab Content -->
            <div id="dashboard" class="tab-content active">
                 <!-- Time Bar -->
                <div class="bg-white p-6 rounded-xl shadow-sm mb-8">
                    <h2 class="text-xl font-bold mb-4 text-gray-900">Time Bar</h2>
                    <div class="w-full h-8 bg-gray-100 rounded-lg flex border">
                        <div id="time-bar" class="h-full w-full flex">
                            <!-- JS will populate this -->
                        </div>
                    </div>
                    <div id="time-bar-labels" class="flex justify-between text-xs text-gray-500 mt-2 px-1">
                        <!-- JS will populate time labels -->
                    </div>
                </div>
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                     <!-- Left Column -->
                    <div class="lg:col-span-2 space-y-8">
                        <!-- Time Metrics -->
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                            <div class="bg-white p-4 rounded-xl shadow-sm">
                                <h3 class="text-sm font-medium text-gray-500">Start Time</h3>
                                <p class="text-2xl font-semibold text-gray-900">09:03 AM</p>
                            </div>
                            <div class="bg-white p-4 rounded-xl shadow-sm">
                                <h3 class="text-sm font-medium text-gray-500">Working Time</h3>
                                <p class="text-2xl font-semibold text-gray-900">8h 15m</p>
                            </div>
                            <div class="bg-white p-4 rounded-xl shadow-sm">
                                <h3 class="text-sm font-medium text-gray-500">Last Seen</h3>
                                <p class="text-2xl font-semibold text-gray-900">05:45 PM</p>
                            </div>
                            <div class="bg-white p-4 rounded-xl shadow-sm">
                                <h3 class="text-sm font-medium text-gray-500">Away Time</h3>
                                <p class="text-2xl font-semibold text-gray-900">45m</p>
                            </div>
                        </div>

                        <!-- Productivity Metrics -->
                        <div class="bg-white p-6 rounded-xl shadow-sm">
                            <h2 class="text-xl font-bold mb-4 text-gray-900">Productivity Analysis</h2>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div class="p-4 rounded-lg bg-green-50 border border-green-200">
                                    <h3 class="text-sm font-medium text-green-700">Productive Time</h3>
                                    <p class="text-2xl font-semibold text-green-800">6h 30m</p>
                                </div>
                                <div class="p-4 rounded-lg bg-red-50 border border-red-200">
                                    <h3 class="text-sm font-medium text-red-700">Non-Productive Time</h3>
                                    <p class="text-2xl font-semibold text-red-800">1h 07m</p>
                                </div>
                                <div class="p-4 rounded-lg bg-yellow-50 border border-yellow-200">
                                    <h3 class="text-sm font-medium text-yellow-700">Neutral Time</h3>
                                    <p class="text-2xl font-semibold text-yellow-800">58m</p>
                                </div>
                            </div>
                        </div>

                        <!-- Weekly Charts -->
                        <div class="bg-white p-6 rounded-xl shadow-sm">
                            <h2 class="text-xl font-bold mb-4 text-gray-900">Weekly Summary</h2>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                                <div>
                                    <h3 class="font-semibold mb-2 text-center text-gray-700">Working Hours</h3>
                                    <canvas id="weeklyHoursChart"></canvas>
                                </div>
                                <div>
                                    <h3 class="font-semibold mb-2 text-center text-gray-700">Away Time</h3>
                                    <canvas id="weeklyAwayTimeChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Right Column -->
                    <div class="lg:col-span-1 space-y-8">
                        <!-- Live Feed -->
                        <div class="bg-white p-6 rounded-xl shadow-sm">
                            <h2 class="text-xl font-bold mb-4 text-gray-900">Live Feed</h2>
                             <ul id="liveFeedList" class="space-y-4 max-h-72 overflow-y-auto"></ul>
                        </div>
                        
                        <!-- Activity Distribution -->
                        <div class="bg-white p-6 rounded-xl shadow-sm">
                            <h2 class="text-xl font-bold mb-4 text-gray-900">Activity Distribution</h2>
                            <div class="w-full h-64 flex justify-center items-center">
                                <canvas id="activityPieChart"></canvas>
                            </div>
                        </div>

                        <!-- Top Websites -->
                        <div class="bg-white p-6 rounded-xl shadow-sm">
                            <h2 class="text-xl font-bold mb-4 text-gray-900">Top Websites Visited</h2>
                            <ul id="websiteList" class="space-y-3"></ul>
                            <button id="loadMoreWebsites" class="w-full mt-4 text-blue-600 font-semibold py-2 rounded-lg hover:bg-blue-50 transition duration-300">Load More</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Details Tab Content -->
            <div id="details" class="tab-content">
                <div class="space-y-8">
                    <div class="bg-white p-6 rounded-xl shadow-sm">
                        <h2 class="text-xl font-bold mb-6 text-gray-900">Productive Break Down</h2>
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Activity</th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">This Day</th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Yesterday</th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">This Week</th>
                                    </tr>
                                </thead>
                                <tbody id="productiveBreakdownTable" class="bg-white divide-y divide-gray-200"></tbody>
                            </table>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <div class="bg-white p-6 rounded-xl shadow-sm">
                            <h2 class="text-xl font-bold mb-6 text-gray-900">Category Breakdown</h2>
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Category</th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Time</th>
                                    </tr>
                                </thead>
                                <tbody id="categoryBreakdownTable" class="bg-white divide-y divide-gray-200"></tbody>
                            </table>
                        </div>
                        <div class="bg-white p-6 rounded-xl shadow-sm">
                            <h2 class="text-xl font-bold mb-6 text-gray-900">Categories Activity</h2>
                             <div class="w-full h-64 flex justify-center items-center">
                                <canvas id="categoryActivityChart"></canvas>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                         <div class="bg-white p-6 rounded-xl shadow-sm">
                            <h3 class="text-lg font-bold text-green-600 mb-4">Productive Application Groups</h3>
                            <ul id="productiveAppsList" class="space-y-4"></ul>
                        </div>
                        <div class="bg-white p-6 rounded-xl shadow-sm">
                            <h3 class="text-lg font-bold text-red-600 mb-4">Non-Productive Application Groups</h3>
                            <ul id="nonProductiveAppsList" class="space-y-4"></ul>
                        </div>
                        <div class="bg-white p-6 rounded-xl shadow-sm">
                            <h3 class="text-lg font-bold text-yellow-500 mb-4">Neutral Application Groups</h3>
                            <ul id="neutralAppsList" class="space-y-4"></ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Screenshots Tab Content -->
            <div id="screenshots" class="tab-content">
                 <div class="bg-white p-6 rounded-xl shadow-sm">
                    <h2 class="text-xl font-bold mb-6 text-gray-900">Captured Screenshots</h2>
                    <div id="screenshotsGrid" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"></div>
                </div>
            </div>

            <!-- Keystrokes Log Tab Content -->
            <div id="keystrokes" class="tab-content">
                <div class="bg-white p-6 rounded-xl shadow-sm">
                    <h2 class="text-xl font-bold mb-6 text-gray-900">Keystrokes Log</h2>
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Time</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Application</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Keystrokes</th>
                                </tr>
                            </thead>
                            <tbody id="keystrokesTable" class="bg-white divide-y divide-gray-200"></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // --- Tab Management ---
        function changeTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            document.querySelectorAll('.tab-button').forEach(b => b.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            event.currentTarget.classList.add('active');
        }

        // --- Mock Data ---
        const mockData = {
            timeBar: {
                startTime: 9, // 9 AM
                endTime: 18, // 6 PM (18:00)
                data: [
                    { type: 'idle', duration: 3 }, // 09:00 - 09:03
                    { type: 'productive', duration: 87 }, // 09:03 - 10:30
                    { type: 'neutral', duration: 30 }, // 10:30 - 11:00
                    { type: 'productive', duration: 75 }, // 11:00 - 12:15
                    { type: 'away', duration: 45 }, // 12:15 - 13:00 (Lunch)
                    { type: 'nonproductive', duration: 120 }, // 13:00 - 15:00
                    { type: 'productive', duration: 15 }, // 15:00 - 15:15
                    { type: 'nonproductive', duration: 45 }, // 15:15 - 16:00
                    { type: 'neutral', duration: 60 }, // 16:00 - 17:00
                    { type: 'productive', duration: 45 }, // 17:00 - 17:45
                ]
            },
            breakdown: [
                { activity: 'Working Time', day: '08:15', day_p: '91.7%', yest: '08:30', yest_p: '94.4%', week: '40:30', week_p: '90.0%' },
                { activity: 'Productive Time', day: '06:30', day_p: '72.2%', yest: '06:45', yest_p: '75.0%', week: '32:00', week_p: '71.1%' },
                { activity: 'Non-Productive Time', day: '01:07', day_p: '12.4%', yest: '00:51', yest_p: '9.4%', week: '05:30', week_p: '12.2%' },
                { activity: 'Neutral Time', day: '00:58', day_p: '10.7%', yest: '01:02', yest_p: '11.5%', week: '04:55', week_p: '10.9%' },
                { activity: 'Away Time', day: '00:45', day_p: '8.3%', yest: '00:30', yest_p: '5.6%', week: '04:30', week_p: '10.0%' },
            ],
            apps: {
                productive: [
                    { name: 'VS Code - project-x', time: '2h 30m', percent: '30.3%' },
                    { name: 'github.com/pulls', time: '1h 15m', percent: '15.2%' },
                    { name: 'stackoverflow.com', time: '45m', percent: '9.1%' },
                    { name: 'jira.mycompany.com', time: '30m', percent: '6.1%' },
                ],
                nonProductive: [
                    { name: 'youtube.com', time: '45m', percent: '9.1%' },
                    { name: 'reddit.com/r/all', time: '22m', percent: '4.4%' },
                ],
                neutral: [
                    { name: 'W3Schools - CSS Grid', time: '35m', percent: '7.1%' },
                    { name: 'Google Search', time: '23m', percent: '4.6%' },
                ]
            },
            categoryBreakdown: {
                table: [
                    { name: 'Development Tools', time: '04:30', percent: '54.5%' },
                    { name: 'Communication', time: '01:00', percent: '12.1%' },
                    { name: 'Social Media', time: '01:07', percent: '13.5%' },
                    { name: 'Business Tools', time: '00:45', percent: '9.1%' },
                    { name: 'Education', time: '00:53', percent: '10.7%' },
                ],
                chart: {
                    labels: ['Development Tools', 'Communication', 'Social Media', 'Business Tools', 'Education'],
                    data: [54.5, 12.1, 13.5, 9.1, 10.7],
                    colors: ['#3B82F6', '#10B981', '#EF4444', '#8B5CF6', '#FBBF24']
                }
            },
            // Other mock data remains the same
            websites: [ { url: 'github.com', time: '2h 15m' }, { url: 'stackoverflow.com', time: '1h 45m' }, { url: 'developer.mozilla.org', time: '1h 10m' }, { url: 'tailwindcss.com', time: '45m' }, { url: 'figma.com', time: '30m' }, { url: 'youtube.com', time: '25m' }, { url: 'reddit.com', time: '15m' }, ],
            weeklyHours: [8.25, 7.5, 8, 8.5, 7.75],
            weeklyAway: [0.75, 1, 0.5, 0.6, 0.8],
            liveFeed: [ { time: '05:45 PM', action: 'Visited figma.com', icon: '🎨' }, { time: '05:42 PM', action: 'Active in Visual Studio Code', icon: '💻' }, { time: '05:30 PM', action: 'Away', icon: '☕' }, { time: '05:15 PM', action: 'Visited github.com/pulls', icon: '🌐' }, { time: '05:01 PM', action: 'Opened slack.exe', icon: '💬' }, ],
            screenshots: [ { time: '09:15 AM', url: 'https://placehold.co/600x400/EEE/31343C?text=Screenshot+1' }, { time: '09:30 AM', url: 'https://placehold.co/600x400/DDD/31343C?text=Screenshot+2' }, { time: '09:45 AM', url: 'https://placehold.co/600x400/CCC/31343C?text=Screenshot+3' }, { time: '10:00 AM', url: 'https://placehold.co/600x400/BBB/31343C?text=Screenshot+4' }, { time: '10:15 AM', url: 'https://placehold.co/600x400/AAA/31343C?text=Screenshot+5' }, { time: '10:30 AM', url: 'https://placehold.co/600x400/999/31343C?text=Screenshot+6' }, ],
            keystrokes: [ { time: '09:05:12 AM', app: 'chrome.exe', log: 'function create(...' }, { time: '09:05:45 AM', app: 'vscode.exe', log: 'const x = 10;' }, { time: '09:06:10 AM', app: 'slack.exe', log: 'Hello team, how are...' }, { time: '09:08:22 AM', app: 'chrome.exe', log: 'css grid template' }, ]
        };
        
        // --- Initial Population on page load ---
        window.onload = function() {
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            document.getElementById('currentDate').textContent = new Date().toLocaleDateString('en-US', options);
            document.getElementById('date-picker').valueAsDate = new Date();
            
            populateDashboard();
            populateDetails();
            populateScreenshots();
            populateKeystrokes();
        };
        
        function populateDashboard() {
            // Time Bar
            const timeBarContainer = document.getElementById('time-bar');
            const timeLabelsContainer = document.getElementById('time-bar-labels');
            timeBarContainer.innerHTML = '';
            timeLabelsContainer.innerHTML = '';
            const { startTime, endTime, data } = mockData.timeBar;
            const totalMinutes = (endTime - startTime) * 60;

            data.forEach(activity => {
                const segment = document.createElement('div');
                const percentage = (activity.duration / totalMinutes) * 100;
                segment.style.width = `${percentage}%`;
                segment.className = `h-full activity-bar-${activity.type}`;
                segment.title = `${activity.type} (${activity.duration} mins)`;
                timeBarContainer.appendChild(segment);
            });

            for (let i = startTime; i <= endTime; i++) {
                const label = document.createElement('span');
                label.textContent = `${i}:00`;
                timeLabelsContainer.appendChild(label);
            }
            
            // Website List
            const websiteList = document.getElementById('websiteList');
            const loadMoreBtn = document.getElementById('loadMoreWebsites');
            let websitesToShow = 5;
            function renderWebsites() {
                websiteList.innerHTML = '';
                mockData.websites.slice(0, websitesToShow).forEach(site => {
                    const li = document.createElement('li');
                    li.className = 'flex justify-between items-center text-sm';
                    li.innerHTML = `<span class="text-gray-700">${site.url}</span><span class="font-semibold text-gray-900">${site.time}</span>`;
                    websiteList.appendChild(li);
                });
                if (websitesToShow >= mockData.websites.length) loadMoreBtn.style.display = 'none';
            }
            loadMoreBtn.addEventListener('click', () => { websitesToShow += 5; renderWebsites(); });
            renderWebsites();
            
            // Live Feed
            const liveFeedList = document.getElementById('liveFeedList');
            liveFeedList.innerHTML = '';
            mockData.liveFeed.forEach(item => {
                const li = document.createElement('li');
                li.className = 'flex items-center text-sm';
                li.innerHTML = `<span class="text-2xl mr-3">${item.icon}</span><div><p class="text-gray-800">${item.action}</p><p class="text-xs text-gray-500">${item.time}</p></div>`;
                liveFeedList.appendChild(li);
            });

            // Charts
            new Chart(document.getElementById('activityPieChart').getContext('2d'), { type: 'doughnut', data: { labels: ['Productive', 'Non-Productive', 'Neutral', 'Away'], datasets: [{ data: [6.5, 1.12, 0.97, 0.75], backgroundColor: ['#22C55E','#EF4444','#FBBF24','#E5E7EB'], borderColor: '#FFFFFF', borderWidth: 4, hoverOffset: 8 }] }, options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'bottom', labels: { boxWidth: 12, padding: 20, font: { size: 12 } } }, tooltip: { callbacks: { label: (c) => `${c.label}: ${Math.floor(c.parsed)}h ${Math.round((c.parsed - Math.floor(c.parsed)) * 60)}m` } } }, cutout: '70%' } });
            new Chart(document.getElementById('weeklyHoursChart').getContext('2d'), { type: 'bar', data: { labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri'], datasets: [{ label: 'Working Hours', data: mockData.weeklyHours, backgroundColor: '#3B82F6', borderRadius: 6, barThickness: 20 }] }, options: { responsive: true, plugins: { legend: { display: false } }, scales: { y: { beginAtZero: true, title: { display: true, text: 'Hours' } }, x: { grid: { display: false } } } } });
            new Chart(document.getElementById('weeklyAwayTimeChart').getContext('2d'), { type: 'bar', data: { labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri'], datasets: [{ label: 'Away Time', data: mockData.weeklyAway, backgroundColor: '#FBBF24', borderRadius: 6, barThickness: 20 }] }, options: { responsive: true, plugins: { legend: { display: false } }, scales: { y: { beginAtZero: true, title: { display: true, text: 'Hours' } }, x: { grid: { display: false } } } } });
        }
        
        function populateDetails() {
            // Breakdown Table
            const breakdownTable = document.getElementById('productiveBreakdownTable');
            breakdownTable.innerHTML = '';
            mockData.breakdown.forEach(item => {
                const row = document.createElement('tr');
                row.innerHTML = `<td class="px-6 py-4 whitespace-nowrap"><div class="text-sm font-medium text-gray-900">${item.activity}</div></td><td class="px-6 py-4 whitespace-nowrap"><div class="text-sm text-gray-900">${item.day}</div><div class="text-xs text-gray-500">${item.day_p}</div></td><td class="px-6 py-4 whitespace-nowrap"><div class="text-sm text-gray-900">${item.yest}</div><div class="text-xs text-gray-500">${item.yest_p}</div></td><td class="px-6 py-4 whitespace-nowrap"><div class="text-sm text-gray-900">${item.week}</div><div class="text-xs text-gray-500">${item.week_p}</div></td>`;
                breakdownTable.appendChild(row);
            });

            // App Lists
            const renderAppList = (listId, data) => {
                const list = document.getElementById(listId);
                list.innerHTML = '';
                data.forEach(app => {
                    const li = document.createElement('li');
                    li.className = "flex justify-between items-start";
                    li.innerHTML = `
                        <span class="text-sm text-gray-700 flex-1 pr-2">${app.name}</span>
                        <div class="text-right">
                            <div class="font-semibold text-sm text-gray-900">${app.time}</div>
                            <div class="text-xs text-gray-500">${app.percent}</div>
                        </div>
                    `;
                    list.appendChild(li);
                });
            };
            renderAppList('productiveAppsList', mockData.apps.productive);
            renderAppList('nonProductiveAppsList', mockData.apps.nonProductive);
            renderAppList('neutralAppsList', mockData.apps.neutral);
            
            // Category Breakdown
            const categoryTable = document.getElementById('categoryBreakdownTable');
            categoryTable.innerHTML = '';
            mockData.categoryBreakdown.table.forEach(cat => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">${cat.name}</td>
                    <td class="px-6 py-4 whitespace-nowrap"><div class="text-sm text-gray-900">${cat.time}</div><div class="text-xs text-gray-500">${cat.percent}</div></td>
                `;
                categoryTable.appendChild(row);
            });

            new Chart(document.getElementById('categoryActivityChart').getContext('2d'), {
                type: 'doughnut',
                data: {
                    labels: mockData.categoryBreakdown.chart.labels,
                    datasets: [{
                        data: mockData.categoryBreakdown.chart.data,
                        backgroundColor: mockData.categoryBreakdown.chart.colors,
                        borderColor: '#FFFFFF',
                        borderWidth: 4,
                        hoverOffset: 8
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'right', labels: { boxWidth: 12, padding: 15 } },
                        tooltip: { callbacks: { label: (c) => `${c.label}: ${c.parsed.toFixed(1)}%` } }
                    },
                    cutout: '70%'
                }
            });
        }

        function populateScreenshots() {
            const grid = document.getElementById('screenshotsGrid');
            grid.innerHTML = '';
            mockData.screenshots.forEach(ss => {
                const item = document.createElement('div');
                item.className = 'relative group';
                item.innerHTML = `<img src="${ss.url}" alt="Screenshot at ${ss.time}" class="rounded-lg object-cover w-full h-full group-hover:opacity-80 transition-opacity"><div class="absolute bottom-0 left-0 bg-black bg-opacity-50 text-white text-xs p-2 rounded-b-lg w-full">${ss.time}</div>`;
                grid.appendChild(item);
            });
        }
        
        function populateKeystrokes() {
            const tableBody = document.getElementById('keystrokesTable');
            tableBody.innerHTML = '';
            mockData.keystrokes.forEach(log => {
                const row = document.createElement('tr');
                row.innerHTML = `<td class="px-6 py-4 whitespace-nowrap text-sm text-gray-600">${log.time}</td><td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-800">${log.app}</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 font-mono">${log.log}</td>`;
                tableBody.appendChild(row);
            });
        }
    </script>
</body>
</html>
